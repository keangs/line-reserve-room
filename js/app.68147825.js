(function(e){function t(t){for(var s,i,o=t[0],l=t[1],c=t[2],u=0,f=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);d&&d(t);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},r={app:0},n=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1c3a":function(e,t,a){e.exports=a.p+"img/room-t-2.776aedf2.jpg"},"1e10":function(e,t,a){e.exports=a.p+"img/room-cw-2.8346362b.jpg"},"1f79":function(e,t,a){e.exports=a.p+"img/room-c-1.1191b7ce.jpg"},"2efd":function(e,t,a){"use strict";a("903b")},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"getRoom",(function(){return T})),a.d(s,"displayDate",(function(){return N})),a.d(s,"getThaiMonth",(function(){return I})),a.d(s,"convertToTimestamp",(function(){return F})),a.d(s,"convertToDate",(function(){return P})),a.d(s,"convertDateYYYYMMDD",(function(){return q}));var r=a("2b0e"),n=a("7496"),i=a("f6c4"),o=function(){var e=this,t=e._self._c;return t(n["a"],[e.isMounted?t(i["a"],["reserve"==e.action?t("Calendar"):e._e(),"check"==e.action?t("Check"):e._e()],1):e._e(),t("div",{staticStyle:{"font-size":"12px"}},[e._v("v 1.2.2")])],1)},l=[],c=(a("88a7"),a("271a"),a("5494"),a("8336")),d=a("a4f6"),u=a("b0af"),f=a("99d9"),m=a("5e66"),h=a("3e35"),b=a("62ad"),p=a("a523"),v=a("2e4b"),g=a("169a"),j=a("4bd4"),y=a("132d"),k=a("8860"),w=a("da13"),_=a("5d23"),x=a("e449"),$=a("0fd9"),D=a("b974"),S=a("8dd9"),M=a("2fa4"),C=a("8654"),E=a("71d9"),R=a("2a7f"),z=a("c3f0"),O=function(){var e=this,t=e._self._c;return t("div",[t(S["a"],{attrs:{height:"64"}},[t(E["a"],{attrs:{flat:""}},[t(c["a"],{staticClass:"pa-0",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" Today ")]),t(c["a"],{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[t(y["a"],[e._v(" mdi-chevron-left-circle-outline ")])],1),t(c["a"],{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[t(y["a"],[e._v(" mdi-chevron-right-circle-outline ")])],1),e.$refs.calendar?t(R["a"],{staticClass:"ml-2"},[t("h5",[e._v(e._s(e.$refs.calendar.title))])]):e._e(),t(M["a"]),t(x["a"],{attrs:{bottom:"",right:""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(c["a"],e._g(e._b({staticClass:"px-1",attrs:{outlined:"",color:"grey darken-2"}},"v-btn",s,!1),a),[t("span",[e._v(e._s(e.typeToLabel[e.type]))]),t(y["a"],{attrs:{right:""}},[e._v(" mdi-menu-down ")])],1)]}}])},[t(k["a"],[t(w["a"],{on:{click:function(t){e.type="day"}}},[t(_["b"],[e._v("Day")])],1),t(w["a"],{on:{click:function(t){e.type="month"}}},[t(_["b"],[e._v("Month")])],1)],1)],1)],1)],1),t(S["a"],{attrs:{height:"600"}},[t(d["a"],{directives:[{def:z["a"],name:"touch",rawName:"v-touch",value:{left:()=>e.next(),right:()=>e.prev()},expression:"{\n        left: () => next(),\n        right: () => prev(),\n      }"}],ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,type:e.type,locale:"th","short-months":!1},on:{"click:event":e.showEvent,"click:more":e.viewDay,"click:date":e.showReserve},scopedSlots:e._u([{key:"event",fn:function({event:a}){return[t("div",{staticClass:"v-event-draggable pl-1"},[e._v(" "+e._s(e.general.getRoom(a.room).name)+" "+e._s(e.general.displayDate(a.start,!1,!0))+" - "+e._s(e.general.displayDate(a.end,!1,!0))+" ")])]}}]),model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),t(x["a"],{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[t(u["a"],{attrs:{color:"grey lighten-4","min-width":"300px",flat:""}},[t(E["a"],{attrs:{color:e.general.getRoom(e.selectedEvent.room).color,dark:""}},[t(R["a"],[e._v(" ห้องประชุม "+e._s(e.general.getRoom(e.selectedEvent.room).name)+" ")]),t(M["a"])],1),t(f["b"],[t($["a"],[t(b["a"],{staticClass:"text-left font-weight-bold"},[e._v(" "+e._s(e.selectedEvent.detail)+" ")])],1),t($["a"],[t(b["a"],{staticClass:"text-right",attrs:{cols:"3"}},[e._v(" ผู้จอง: ")]),t(b["a"],{staticClass:"text-left font-weight-bold"},[e._v(" "+e._s(e.selectedEvent.userName)+" ")])],1),t($["a"],[t(b["a"],{staticClass:"text-right",attrs:{cols:"3"}},[e._v(" วันที่: ")]),t(b["a"],{staticClass:"text-left font-weight-bold"},[e._v(" "+e._s(e.general.displayDate(e.selectedEvent.start,!0,!1))+" ")])],1),t($["a"],[t(b["a"],{staticClass:"text-right",attrs:{cols:"3"}},[e._v(" เวลา: ")]),t(b["a"],{staticClass:"text-left font-weight-bold"},[e._v(" "+e._s(e.general.displayDate(e.selectedEvent.start,!1,!0))+" - "+e._s(e.general.displayDate(e.selectedEvent.end,!1,!0))+" ")])],1)],1),t(f["a"],[e.cancelReserve?t(c["a"],{attrs:{color:"error"},on:{click:function(t){e.deleteItem(e.selectedEvent),e.selectedOpen=!1}}},[e._v(" Cancel ")]):e._e(),t(M["a"]),t(c["a"],{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v(" Close ")])],1)],1)],1)],1),t(g["a"],{attrs:{"max-width":"500"},model:{value:e.dialogDate,callback:function(t){e.dialogDate=t},expression:"dialogDate"}},[t(u["a"],[t(p["a"],[t(u["a"],{staticClass:"mx-auto",attrs:{elevation:"14","max-width":"600"}},[t(m["a"],{attrs:{cycle:"","hide-delimiter-background":"","show-arrows-on-hover":"",height:"300"}},e._l(e.roomSelected.image,(function(e,a){return t(h["a"],{key:a,attrs:{eager:"",src:e.src}})})),1)],1),t("div",{staticClass:"pt-5"}),t(j["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t($["a"],[t(b["a"],[t(D["a"],{attrs:{items:e.general.getRoom(),"item-text":"name","item-value":"room",label:"ห้องประชุมที่ต้องการจอง","return-object":!0},model:{value:e.roomSelected,callback:function(t){e.roomSelected=t},expression:"roomSelected"}})],1),t(b["a"],[t(C["a"],{staticClass:"hide-underline",attrs:{label:"จำนวนที่นั่งในห้องประชุม",value:e.roomSelected.seat,readonly:""}})],1)],1),t(C["a"],{attrs:{label:"รายละเอียดการจอง"},model:{value:e.detail,callback:function(t){e.detail=t},expression:"detail"}}),t($["a"],[t(b["a"],[t(v["a"],{attrs:{multiple:"","full-width":"",locale:"th-TH","show-current":!1},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}})],1)],1),t("v-digital-time-picker",{attrs:{label:"เวลาเริ่มต้น","append-icon":"mdi-clock-time-four-outline"},model:{value:e.timeStart,callback:function(t){e.timeStart=t},expression:"timeStart"}}),t("v-digital-time-picker",{attrs:{label:"เวลาสิ้นสุด","append-icon":"mdi-clock-time-four-outline"},model:{value:e.timeEnd,callback:function(t){e.timeEnd=t},expression:"timeEnd"}})],1),t(c["a"],{staticClass:"mr-4",attrs:{color:"error"},on:{click:function(t){e.dialogDate=!1}}},[e._v(" Cancel ")]),t(c["a"],{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.addReserve}},[e._v(" Reserve ")])],1)],1)],1)],1)},Y=[];a("5b81"),a("14d9");function T(e=""){let t=[{room:0,name:"C",color:"red",seat:10,image:[{src:a("1f79")},{src:a("d8bb")}]},{room:1,name:"D",color:"blue",seat:6,image:[{src:a("7bee")},{src:a("7fec")}]},{room:2,name:"T",color:"green",seat:4,image:[{src:a("9a3c")},{src:a("1c3a")}]},{room:3,name:"CW",color:"orange",seat:10,image:[{src:a("a967")},{src:a("1e10")},{src:a("b401")}]}];return[void 0,""].includes(e)?t:t.filter((function(t){return t.room==e}))[0]}function N(e,t=!0,a=!0){if(void 0!=e){var s=new Date(e);return s=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()),t&&a?s.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}):t?s.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"short"}):a?s.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"}):void 0}}function I(e){if(Number(e)<1&&Number(e)>12)return"";var t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤษจิกายน","ธันวาคม"];return t[Number(e)-1]}function F(e){var t=Date.parse(e);return t/1e3}function P(e,t){var a=e+" "+t,s=a.split(" "),r=s[1].split(":"),n=s[0].split("-");return new Date(n[2],parseInt(n[1],10)-1,n[0],r[0],r[1])}function q(e,t="",a=!1,s=!1){let r=e.toString().padEnd(8,"0"),[n,i,o]=[r.substring(0,4),r.substring(4,6),r.substring(6)];return a&&(n-=543),s?`${n}${t}${i}${t}${o}`:`${o}${t}${i}${t}${n}`}var A=a("c1df"),B=a.n(A),L=a("3d20"),H=a.n(L);async function U(e,t){"none"!==e.getContext().type&&await e.sendMessages([{type:"text",text:t}])}function V(e,t,a){if(void 0!=t.key&&(a.child(t.key).remove(),e.isInClient())){let a=`ยกเลิกการจองห้องประชุมเรียบร้อยแล้ว\nห้องประชุม: ${T(t.room).name}\nวันที่: ${N(t.start,!0,!1)}\nเวลา: ${N(t.start,!1,!0)} - ${N(t.end,!1,!0)}`;U(e,a)}}async function G(e,t=""){let a=[],s=e;return[void 0,""].includes(t)||(s=e.orderByChild("userId").equalTo(t)),await s.once("value",async e=>{let s=new Date;e.forEach(e=>{let r=e.val();r.key=e.key,r.start=new Date(1e3*r.start),r.end=new Date(1e3*r.end),([void 0,""].includes(t)||new Date(r.start.toDateString())>=new Date(s.toDateString()))&&a.push(r)})}),a.sort((e,t)=>e.start-t.start),a}var J={data:()=>({dates:[],timeValue:"",general:s,isMounted:!1,dialogDate:!1,cancelReserve:!1,valid:!0,roomSelected:{},detail:"",dateStart:0,timeStart:"",timeEnd:"",title:"",focus:"",type:"month",typeToLabel:{month:"Month",day:"Day"},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[]}),computed:{},async mounted(){this.roomSelected=T(0),this.$refs.calendar.checkChange(),this.events=await G(this.$store.state.reserveRef),this.isMounted=!0},methods:{dateFormat(e){return B()(e).format("ddd DD MMM")},showReserve(){this.dates=[this.focus];let e=this.focus.replaceAll("-",""),[t,a,s]=[Number(e.substring(0,4))+543,e.substring(4,6),e.substring(6)];this.detail="",this.dateStart=Number(`${t}${a}${s}`),this.timeStart="08:00",this.timeEnd="17:00",this.dialogDate=!0},checkReserve(e,t,a,s,r,n){a-=1;let i=this.events.filter((function(r){let n=new Date(r.start);if(r.room===e&&n.getDate()===t&&n.getMonth()===a&&n.getFullYear()===s)return r})),o=0;return i.forEach(e=>{var i=new Date(e.start).getTime(),l=new Date(e.end).getTime();let c=r.split(":");var d=new Date(s,a,t,Number(c[0]),Number(c[1])).getTime();c=n.split(":");var u=new Date(s,a,t,Number(c[0]),Number(c[1])).getTime();if(Math.min(i,l)<=Math.max(d,u)&&Math.max(i,l)>=Math.min(d,u))return o=!0,!1}),!o},async deleteItem(e){V(this.$liff,e,this.$store.state.reserveRef),this.events=await G(this.$store.state.reserveRef)},async addReserve(){if(!this.$refs.form.validate())return;if(this.events=await G(this.$store.state.reserveRef),Number(this.timeStart.replace(":",""))>=Number(this.timeEnd.replace(":","")))return void H.a.fire({title:"ไม่สามารถจองช่วงเวลาที่ระบุได้",text:'"เวลาสิ้นสุด" ต้องมีค่ามากกว่า "เวลาเริ่มต้น"',icon:"error",confirmButtonColor:"#3085d6"});this.dates.forEach(e=>{this.dateStart=B()(e).format("YYYYMMDD");const t=B()(e,"YYYYMMDD");t.locale("th"),this.checkReserve(this.roomSelected.room,Number(this.dateStart.toString().substring(6,8)),Number(this.dateStart.toString().substring(4,6)),Number(this.dateStart.toString().substring(0,4)),this.timeStart,this.timeEnd)||H.a.fire({title:"ไม่สามารถจองช่วงเวลาที่ระบุได้",html:`\n            ห้องประชุม: ${T(this.roomSelected.room).name}<br/>\n            วันที่: ${t.format("DD MMMM")} ${Number(t.format("YYYY"))+543}<br/>\n            เวลา: ${this.timeStart} - ${this.timeEnd}<br/><br/>\n            มีการจองอยู่ก่อนแล้ว`,icon:"error",confirmButtonColor:"#3085d6"})});let e=`จองห้องประชุมเรียบร้อยแล้ว\nห้องประชุม: ${T(this.roomSelected.room).name}\n`;this.dates.forEach((t,a,s)=>{this.dateStart=B()(t).format("YYYYMMDD");let r=P(q(this.dateStart,"-",!0,!1),this.timeStart),n=P(q(this.dateStart,"-",!0,!1),this.timeEnd),i=T(this.roomSelected.room);this.$store.state.reserveRef.push({userId:this.$store.state.profile.userId,userName:this.$store.state.profile.displayName,room:this.roomSelected.room,name:i.name,detail:this.detail.trim(),start:F(r),end:F(n),timed:!0}),e+=`วันที่: ${N(r,!0,!1)}\nเวลา: ${N(r,!1,!0)} - ${N(n,!1,!0)}`,a!=s.length-1&&(e+="\n")}),this.$liff.isInClient()&&U(this.$liff,e),this.events=await G(this.$store.state.reserveRef),this.dialogDate=!1},viewDay({date:e}){this.focus=e,this.type="day"},getEventColor(e){return T(e.room).color},setToday(){this.focus=""},prev(){this.$refs.calendar.prev()},next(){this.$refs.calendar.next()},async showEvent({nativeEvent:e,event:t}){const a=()=>{this.selectedEvent=t,this.selectedElement=e.target,requestAnimationFrame(()=>requestAnimationFrame(()=>this.selectedOpen=!0))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame(()=>requestAnimationFrame(()=>a()))):a(),this.cancelReserve=!1,t.userId==this.$store.state.profile.userId&&(this.cancelReserve=!0),e.stopPropagation()}}},K=J,W=(a("2efd"),a("2877")),Q=Object(W["a"])(K,O,Y,!1,null,"ca96b4f2",null),Z=Q.exports,X=a("ce7e"),ee=a("7efd"),te=a("9dbe"),ae=function(){var e=this,t=e._self._c;return t(p["a"],{staticClass:"pa-0",attrs:{"fill-height":""}},[e.isMounted?t($["a"],[t(b["a"],[t("div",[e._v("จำนวนการจอง: "+e._s(e.events.length))]),t($["a"],{attrs:{"no-gutters":""}},[t(b["a"],[t(ee["a"],{staticClass:"mx-auto",attrs:{mandatory:"","show-arrows":"","prev-icon":"mdi-chevron-left-circle-outline","next-icon":"mdi-chevron-right-circle-outline"},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.events,(function(a){return t(te["a"],{key:a.key},[t(u["a"],{staticClass:"ma-2",attrs:{width:"220"}},[t(f["c"],{class:""+e.general.getRoom(a.room).color},[t("strong",{staticStyle:{color:"white"}},[e._v(e._s("ห้องประชุม "+e.general.getRoom(a.room).name))])]),t(X["a"]),t(f["b"],[t(b["a"],{staticClass:"text--primary",staticStyle:{"font-size":"15px"}},[t($["a"],[t("p",[t("strong",[e._v(e._s(a.detail))])])]),t($["a"],[t("p",[t("strong",[e._v("วันที่:")]),e._v(" "+e._s(e.general.displayDate(a.start,!0,!1))+" ")])]),t($["a"],[t("p",[t("strong",[e._v("เวลา:")]),e._v(" "+e._s(e.general.displayDate(a.start,!1,!0))+" - "+e._s(e.general.displayDate(a.end,!1,!0))+" ")])])],1)],1),t(X["a"]),t(f["a"],[t(c["a"],{attrs:{color:"error"},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" ยกเลิกการจอง ")])],1)],1)],1)})),1)],1)],1)],1)],1):e._e()],1)},se=[],re={data:()=>({general:s,deleteReserve:V,isMounted:!1,model:null,events:[]}),async mounted(){this.events=await G(this.$store.state.reserveRef,this.$store.state.profile.userId),this.isMounted=!0},methods:{async deleteItem(e){V(this.$liff,e,this.$store.state.reserveRef),this.events=await G(this.$store.state.reserveRef,this.$store.state.profile.userId)}}},ne=re,ie=Object(W["a"])(ne,ae,se,!1,null,null,null),oe=ie.exports,le={name:"App",components:{Check:oe,Calendar:Z},data:()=>({isMounted:!1,action:"reserve"}),async mounted(){const e=this.$firebase.database();this.$store.state.reserveRef=e.ref("/reserve");const t=decodeURIComponent(window.location.search).replace("?liff.state=","");await this.$liff.init({liffId:"1656372478-GR0rEBZ1"}),await this.$liff.ready,this.$liff.isLoggedIn()||await this.$liff.login(),await this.$liff.getProfile().then(e=>{this.$store.state.profile=e,this.isMounted=!0}).catch(e=>{console.log("error",e),this.isMounted=!0});const a=new URLSearchParams(t),s=a.get("action");"check"==s&&(this.action="check"),this.isMounted=!0}},ce=le,de=(a("9548"),Object(W["a"])(ce,o,l,!1,null,null,null)),ue=de.exports,fe=a("2f62");r["default"].use(fe["a"]);var me=new fe["a"].Store({state:{profile:{userId:"test",displayName:"test"},reserveRef:null},mutations:{},actions:{},modules:{}}),he=a("f309");r["default"].use(he["a"]);var be=new he["a"]({}),pe=function(){var e=this,t=e._self._c;return t(x["a"],{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(C["a"],e._g(e._b({attrs:{label:e.label,"append-icon":"mdi-calendar",readonly:"",disabled:e.disabled},on:{change:e.change},model:{value:e.dateFormatted,callback:function(t){e.dateFormatted=t},expression:"dateFormatted"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(v["a"],{attrs:{locale:"th"},on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)},ve=[],ge={props:{change:{type:Function,default:()=>1},value:{type:Number,default:0},label:{type:String,default:"วันที่"},disabled:{type:Boolean,default:!1}},data:e=>({dateFormatted:null,date:null,menu:!1,modal:!1}),computed:{computedDateFormatted(){return this.formatDate(this.date)}},watch:{value(){this.date=this.parseDate(this.value,"")},date(){this.dateFormatted=this.formatDate(this.date),this.$emit("update:value",Number(this.formatToYYYYMMDD(this.date)))}},created(){if(!this.value)return null;this.date=this.parseDate(this.value,"")},methods:{formatDate(e){if(!e)return null;const[t,a,s]=e.toString().split("-");return`${s}/${a}/${Number(t)+543}`},formatToYYYYMMDD(e){if(!e)return null;const[t,a,s]=e.toString().split("-");return`${Number(t)+543}${a}${s}`},parseDate(e,t="/"){if(!e)return null;const[a,s,r]=""!=t?e.toString().split("/"):[e.toString().substring(6),e.toString().substring(4,6),e.toString().substring(0,4)];return`${Number(r)-543}-${s.padStart(2,"0")}-${a.padStart(2,"0")}`}}},je=ge,ye=Object(W["a"])(je,pe,ve,!1,null,null,null),ke=ye.exports,we=a("c964"),_e=function(){var e=this,t=e._self._c;return t(x["a"],{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":e.time,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){e.time=t},"update:return-value":function(t){e.time=t}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:s}){return[t(C["a"],e._g(e._b({attrs:{label:e.label,"append-icon":"mdi-clock-time-four-outline",readonly:"",disabled:e.disabled,rules:[e.rules.required]},on:{change:e.change},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},"v-text-field",s,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e.menu?t(we["a"],{attrs:{format:"24hr",scrollable:"","full-width":""},on:{"click:minute":function(t){return e.$refs.menu.save(e.time)}},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}):e._e()],1)},xe=[],$e={props:{change:{type:Function,default:()=>1},value:{type:String,default:""},label:{type:String,default:"เวลา"},disabled:{type:Boolean,default:!1}},data(){return{rules:{required:e=>!!e||"Required."},time:null,menu:!1,modal:!1}},watch:{value(){this.time=this.value},time(){this.$emit("update:value",this.time)}},created(){if(!this.value)return null;this.time=this.value}},De=$e,Se=Object(W["a"])(De,_e,xe,!1,null,null,null),Me=Se.exports,Ce=a("af60"),Ee=(a("3672"),a("aedf"));r["default"].component("DatePicker",ke),r["default"].component("TimePicker",Me),r["default"].component("v-digital-time-picker",Ce["VDigitalTimePicker"]),Ee["a"].initializeApp({apiKey:"AIzaSyAziOgMG_QzcoStHu8eBV8BjD_W1Kaur1o",authDomain:"reservelinebot.firebaseapp.com",databaseURL:"https://reservelinebot-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"reservelinebot",storageBucket:"reservelinebot.appspot.com",messagingSenderId:"1031269586313",appId:"1:1031269586313:web:8610e060555a781d44fd58"}),r["default"].prototype.$firebase=Ee["a"],r["default"].prototype.$liff=window.liff,r["default"].config.productionTip=!1,new r["default"]({store:me,vuetify:be,render:e=>e(ue)}).$mount("#app")},"7bee":function(e,t,a){e.exports=a.p+"img/room-d-1.7a3da327.jpg"},"7fec":function(e,t,a){e.exports=a.p+"img/room-d-2.3f9b122c.jpg"},"903b":function(e,t,a){},9548:function(e,t,a){"use strict";a("d520")},"9a3c":function(e,t,a){e.exports=a.p+"img/room-t-1.993f5904.jpg"},a967:function(e,t,a){e.exports=a.p+"img/room-cw-1.348790ff.jpg"},b401:function(e,t,a){e.exports=a.p+"img/room-cw-3.9c68a419.jpg"},d520:function(e,t,a){},d8bb:function(e,t,a){e.exports=a.p+"img/room-c-2.895bf2e2.jpg"}});